<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <Title>Common JSON Utilities</Title>
    <Description>This package provides JSON-related utility classes used by other MetaBrainz packages.</Description>
    <PackageTags>MetaBrainz JSON</PackageTags>
    <Version>1.1.0-pre</Version>
  </PropertyGroup>

  <PropertyGroup>
    <TargetFrameworks>netcoreapp3.1;netcoreapp2.1;netstandard2.1;netstandard2.0;net48;net472;net461</TargetFrameworks>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="JetBrains.Annotations" Version="2020.1.0" IncludeAssets="compile" PrivateAssets="all" />
    <PackageReference Include="System.Text.Json" Version="4.7.1" />
  </ItemGroup>

  <Target Name="AdjustPackageVersionForAppVeyor"
          Condition=" '$(APPVEYOR_BUILD_NUMBER)' != '' And '$(APPVEYOR_BUILD_NUMBER)' != '' "
          BeforeTargets="GenerateNuSpec"
          DependsOnTargets="ParseVersionSpecification;SetPackagePropertiesFromVersion">
    <PropertyGroup>
      <PackageVersion>$(_Version_Full)-appveyor.$(APPVEYOR_BUILD_NUMBER)</PackageVersion>
      <PackageVersion Condition=" '$(PackageBuildIdentifier)' != '' ">$(PackageVersion)+$(PackageBuildIdentifier)</PackageVersion>
    </PropertyGroup>
    <!-- Debug Output -->
    <Message Importance="High" Text="Adjusted Package Version For AppVeyor Feed:"/>
    <Message Importance="High" Text="- AppVeyor Build ID     : $(APPVEYOR_BUILD_ID)"/>
    <Message Importance="High" Text="- AppVeyor Build Number : $(APPVEYOR_BUILD_NUMBER)"/>
    <Message Importance="High" Text="- AppVeyor Build Version: $(APPVEYOR_BUILD_VERSION)"/>
    <Message Importance="High" Text="- PackageVersion        : $(PackageVersion)"/>
  </Target>

</Project>
